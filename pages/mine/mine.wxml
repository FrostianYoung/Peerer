<!--pages/mine/mine.wxml-->
<view>
  <view class="navBar">
    <navigation-bar bind:refresh="refresh"></navigation-bar>
  </view>
  <view class="network_content" >
    <view class="base-info">
      <image bind:_l="_l" bind:click="_e" heiget="80px" shape="circle" 
      src=""></image>
      <view class="base-info_content">
        <view class="base-info_content_text">
          <view class="user-name">{{(userInfo.nickName?userInfo.nickName:'Peer')+''}}
            <text class="icon" style="color: rgb(119, 119, 119); margin-left: 4px;" wx:if="{{userInfo.sex=='0'}}">icon</text>
            <text class="icon" style="color: rgb(119, 119, 119); margin-left: 4px;" wx:if="{{userInfo.sex=='1'}}">icon</text>
          </view>
          <text class="user-remark" wx:if="{{}}">{{userInfo.remark}}</text>
          <text class="user-remark" wx:if="{{}}"></text>
        </view>
        <view bindtap="settingBaseInfo" class="btn" style="background-color: rgba(230, 242, 255, 1); line-height:20px; border-radius:10px; height: 26px; width:100%; padding: 2px 4px; box-sizing: border-box; display:flex; align-items: center; justify-content: center;">
          <text class="icon" style="color:#74aeea; font-size:16px; margin-right: 4px;"></text>
          <text style="color:#74aeea; font-size:14px;">用户信息</text>
        </view>
      </view>
    </view>
    <view class="tabs">
      <van-tabs title-active-color="#89bbee" title-inactive-color="#bbbbbb" 
      info dot
      line-width="60" color="transparent"
      bind:_l="_l" bind:change="tagChange" active="{{currentTab}}" 
      list="{{tabList}}" style="border-radius:10px;"></van-tabs>
    </view>
    <view style="box-sizing:border-box; display:flex; align-items:center; justify-content:center;flex-direction:column;width:100%;" wx:if="{{currentTab==0&&isLogin}}">
      <view style="margin-top:16px; box-sizing:border-box;display:flex; align-items:center; justify-content:center;flex-direction:row;font-size:14px;">
        <image bind:_l="_l" height="32px" shape="circle" src="" style="margin-right:4px;" width="32px"></image>
        <view>
          <text>生成</text>
          <text style="color:#74aeea; margin-right:4px;">Peer名片</text>
          <text>关联志同道合的同龄人 👥</text>
        </view>
      </view>
      <edu-info bind:_l bind:refresh="loadData" items="{{userInfo.educationList}}" style="width:100%;"></edu-info>
      <research-info bind:_l bind:refresh="loadData" items="{{userInfo.researchList}}" style="width:100%;"></research-info>
      <internship bind:_l bind:refresh="loadData" items="{{userInfo.internshipList}}" style="width:100%;"></internship>
      <project-info bind:_l bind:refresh="loadData" items="{{userInfo.projectList}}" style="width:100%;"></project-info>
      <personality-tag-info bind:_l bind:refresh="loadData" items="{{userInfo.tagsList}}" style="width:100%;"></personality-tag-info>
      <statement-tag-info bind:_l bind:refresh="loadData" items="{{userInfo.tagsList}}" style="width:100%;"></statement-tag-info>
      <view style="margin-top: 32px; width: 100%; display:flex; align-items:center;">
        <text class="icon" style="color: #86bcf2; margin-right: 4px; font-size: 26px;">icon</text>
        <text style="color:#aaaaaa;">我的动态</text>
      </view>
      <view style="margin-top:16px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;border-radius:12px;background-color:rgba(247, 251, 255, 100);color:rgba(85, 85, 85, 100);box-shadow:0px 2px 6px 0px rgba(0, 0, 0, 0.1);border:1px solid rgba(222, 235, 247, 100);padding:8px;">
        <view style="display:flex;align-items:center;justify-content:flex-start;flex-direction:row;font-size:14px;">
          <image bind:_l="_l" height="32px" shape="circle" src="" style="margin-right:4px;" width="32px"></image>
          <view>
            <text style="margin-right:4px;">发布动态</text>
            <text>与Peers分享生活经历🎐</text>
          </view>
        </view>
        <view bindtap="publish" style="box-sizing:border-box;margin-top:8px;width:100%;max-width:108px;height:32px;line-height:23px;border-radius:16px;background-color:rgba(150, 200, 250, 100);font-size:16px;text-align:center;display:flex;align-items:center;justify-content:center;padding:4px 8px;">
          <text class="icon" style="margin-right4px; color:white;">icon</text>
          <text style="color:white;">发布</text>
        </view>
      </view>
      <my-friend-zone bind:FriendZonetalCount="_e" bind:_l="_l" degree="{{degree}}" experience="{{experience}}" industry="{{industry}}" memberId="{{userId}}" style="width:100%;" tips="还没有动态 ~"></my-friend-zone>
      <view bindtap="logout" style="box-sizing:border-box;margin-top:16px;width:160px;height:36px;line-height:20px;border-radius:20px;background-color:rgba(150, 200, 250, 100);color:white;font-size:14px;text-align:center;display:flex;align-items:center;justify-content:center;padding:0px 8px;">退出登录</view>
    </view>
    <view style="box-sizing:border-box;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;" wx:if="{{currentTab==0&&!isEditting&&!isLogin}}">
      <view class="content_login">
        <view class="intro">Hi 🎐 欢迎来到Peer！☁️</view>
        <view class="intro" style="line-height:2;">
          <text style="margin-right:4px;">在这里</text>
          <text>你能关联</text>
          <text class="tag" color="#6fa9e3">专业研究</text>
          <text class="tag" color="#6fa9e3">实习经历</text>
        </view>
        <view class="intro">
          <text class="tag" color="#6fa9e3">日常爱好</text>
          <text class="tag" color="#6fa9e3">未来规划</text>
          <text style="margin-left:4px;">相关的Peers</text>
        </view>
        <view class="intro">
          <text style="background-color: transparent;">结识志同道合的同龄人 👥</text>
        </view>
        <button class="loginBtn" bindgetphonenumber="getPhoneNumber" open-type="getPhoneNumber"
        style="width: 160px; margin-top: 8px;">
          <text style="margin-right:4px;">登录</text>
          <text style="font-weight:bold;">Peer</text>
          <text class="icon" style="margin-left:8px;">icon</text>
        </button>
      </view>
    </view>
    <van-popup bind:click="showPopUpImage" round show="showPopUpImage"
    mode="center" value="{{showPopUpImage}}">
      <view class="popUpImage">
        <image bind:_l="_l" round height="240px" shape="square"
        src="" width="240px"></image>
        <text class="nick-name" style="font-weight=700;">{{userInfo.nickName+''}}</text>
      </view>
    </van-popup>
    <van-popup class="dialog" 
      show="{{ show }}" closeable 
      round position="bottom" custom-style="height: 50%" 
      bind:close="onClose"
      value="{{isPhoneLogin}}">
      <view class="dislog_content">
        <view class="dislog_content_inner">
          <van-field bind:input="getInputPhoneNumber" 
          class="dialog_content_input" 
          value="{{ mobile }}" 
          focus
          bind:change="onChange"
          type="number"
          center clearable 
          label="手机号" labelWidth="100" 
          maxlength="11" placeholder="请填写手机号" 
          border="{{ false }}"
          use-button-slot>
          <van-button
            bind:click="getCode"
            class="van-field-button"
            size="mini"
            slot="button"
            custom-style="width: 100rpx;"
            type="primary" bindtap="getCode">
            {{ codeText }}
          </van-button>
        </van-field>
        <van-field 
        class="van-field-button"
        bind:click=""
        value="{{ code }}" 
        focus
        center clearable 
        bind:change="onChange"
        data-value="code" type="number"
        label="验证码" labelWidth="100" 
        maxlength="6" placeholder="请填写验证码"
        border="{{ false }}"></van-field>
        <button class="dialog_content_button" bindtap="phoneLogin">
          <text style="margin-right:4px;">登录</text>
          <text style="font-weight:bold;">Peer</text>
          <text class="icon" style="margin-left:8px;">icon</text>
        </button>
        </view>
      </view>
    </van-popup>
  </view>
</view>